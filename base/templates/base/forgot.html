{% extends 'main.html' %}
{% load widget_tweaks %}

{%block content%}

<div class="flex items-center justify-center flex-col mt-5">


    <div class=" dark:bg-gray-800 bg-gray-200 rounded-lg shadow-2xl mt-10">
        <h1
            class="my-5 font-bold text-center text-transparent text-3xl bg-clip-text bg-gradient-to-r from-green-800 to-primary-glow-green mt-10">
            Forgot Password
        </h1>

        <form action="" method="POST" class="mt-4 w-[85vw] md:w-[50vw] px-4 md:px-24 py-10 ">
            {%csrf_token%}

            {%if type == 'email' %}


            <label for="email" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">Email or
                Username</label>


            <div class="relative w-full">

                <input required class="appearance-none control-form font-mono js-password" type="text" name="uemail"
                    placeholder="Enter Your Account's Email or username" autocomplete="off" />
            </div>

            <button type="submit"
                class="text-white bg-gradient-to-r w-full to-primary-glow-green from-green-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-primary-glow-green dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-2 hover:scale-105 ">Send
                Email
            </button>


            {%endif%}
            {% if type == 'code' %}



            <label for="code" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">Code (Enter Code
                sent to {{blur_email}})</label>
            <div class="text-center my-2">
                <a href="?resend=True" class="text-xs text-center text-blue-500 underline">
                    Resend Or Change Email
                </a>
            </div>

            <div class="relative w-full">

                <input required class="appearance-none control-form font-mono js-password" type="password" name="code"
                    placeholder="Enter Code" autocomplete="off" />
            </div>

            <button type="submit"
                class="text-white bg-gradient-to-r w-full to-primary-glow-green from-green-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-primary-glow-green dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-2 hover:scale-105 ">Enter
                Code
            </button>









            {%endif%}


            {%if type == 'changepwd' %}

            <div class="text-center my-2">
                <a href="?resend=True" class="text-xs text-center text-blue-500 underline">
                    Resend Or Change Email
                </a>
            </div>

            <label for="password" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">New
                Password</label>

            <div class="relative w-full">

                <input required class="appearance-none control-form font-mono js-password" type="text" name="password1"
                    placeholder="Enter Your New Password" autocomplete="off" />
            </div>

            <label for="password" class="block my-2 ml-1 text-sm font-medium text-gray-900 dark:text-white">Confirm New
                Password</label>

            <div class="relative w-full">

                <input required class="appearance-none control-form font-mono js-password" type="text" name="password2"
                    placeholder="Confirm New Password" autocomplete="off" />
            </div>

            <button type="submit"
                class="text-white bg-gradient-to-r w-full to-primary-glow-green from-green-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-primary-glow-green dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 my-2 hover:scale-105 ">Change
                Password
            </button>

            {%endif%}
            <div class="text-center mb-10 text-sm opacity-90">
                Don't Have an Account?<a href="{% url 'register' %}" class="font-semibold text-blue-400">Register</a>
            </div>



            {% if messages %}
            {% for message in messages %}
            <div class="text-red-600 text-semibold text-center">
                {{ message }}
            </div>
            {% endfor %}
            {% endif %}

        </form>

    </div>


    <script>

        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }



    </script>


    {%endblock%}
